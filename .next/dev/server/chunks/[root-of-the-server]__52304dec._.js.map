{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/antigravity/SajangnimBiseo/src/app/api/debug-keit/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\n\r\nexport const dynamic = \"force-dynamic\";\r\n\r\nexport async function GET() {\r\n    try {\r\n        const res = await fetch(\r\n            \"https://srome.keit.re.kr/srome/biz/perform/opnnPrpsl/retrieveTaskAnncmListView.do?prgmId=XPG201040000\",\r\n            {\r\n                headers: {\r\n                    \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 Chrome/120.0.0.0 Safari/537.36\",\r\n                    \"Referer\": \"https://srome.keit.re.kr\",\r\n                    \"Accept\": \"text/html,application/xhtml+xml\",\r\n                    \"Accept-Language\": \"ko-KR,ko;q=0.9\",\r\n                },\r\n                signal: AbortSignal.timeout(20_000),\r\n            }\r\n        );\r\n\r\n        const html = await res.text();\r\n\r\n        // 1) 첫 번째 공고 제목이 있는 부분 주변 HTML 추출 (2026년도 자동차 주변)\r\n        const idx = html.indexOf(\"자동차산업\");\r\n        const snippet1 = idx >= 0 ? html.slice(Math.max(0, idx - 500), idx + 500) : \"Not found\";\r\n\r\n        // 2) table 태그 있는지 확인\r\n        const hasTable = html.includes(\"<table\");\r\n        const hasUl = html.includes(\"<ul\");\r\n        const tableCount = (html.match(/<table/g) ?? []).length;\r\n        const trCount = (html.match(/<tr/g) ?? []).length;\r\n        const liCount = (html.match(/<li/g) ?? []).length;\r\n\r\n        // 3) '등록일' 텍스트 주변\r\n        const regIdx = html.indexOf(\"등록일\");\r\n        const snippet2 = regIdx >= 0 ? html.slice(Math.max(0, regIdx - 300), regIdx + 200) : \"Not found\";\r\n\r\n        // 4) 전체 HTML 크기\r\n        const htmlSize = html.length;\r\n        const htmlPreview = html.slice(0, 2000);\r\n\r\n        return NextResponse.json({\r\n            status: res.status,\r\n            htmlSize,\r\n            hasTable,\r\n            hasUl,\r\n            tableCount,\r\n            trCount,\r\n            liCount,\r\n            aroundTitle: snippet1,\r\n            aroundRegDate: snippet2,\r\n            htmlPreview,\r\n        });\r\n    } catch (err: any) {\r\n        return NextResponse.json({ error: err.message }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAEO,MAAM,UAAU;AAEhB,eAAe;IAClB,IAAI;QACA,MAAM,MAAM,MAAM,MACd,yGACA;YACI,SAAS;gBACL,cAAc;gBACd,WAAW;gBACX,UAAU;gBACV,mBAAmB;YACvB;YACA,QAAQ,YAAY,OAAO,CAAC;QAChC;QAGJ,MAAM,OAAO,MAAM,IAAI,IAAI;QAE3B,kDAAkD;QAClD,MAAM,MAAM,KAAK,OAAO,CAAC;QACzB,MAAM,WAAW,OAAO,IAAI,KAAK,KAAK,CAAC,KAAK,GAAG,CAAC,GAAG,MAAM,MAAM,MAAM,OAAO;QAE5E,qBAAqB;QACrB,MAAM,WAAW,KAAK,QAAQ,CAAC;QAC/B,MAAM,QAAQ,KAAK,QAAQ,CAAC;QAC5B,MAAM,aAAa,CAAC,KAAK,KAAK,CAAC,cAAc,EAAE,EAAE,MAAM;QACvD,MAAM,UAAU,CAAC,KAAK,KAAK,CAAC,WAAW,EAAE,EAAE,MAAM;QACjD,MAAM,UAAU,CAAC,KAAK,KAAK,CAAC,WAAW,EAAE,EAAE,MAAM;QAEjD,kBAAkB;QAClB,MAAM,SAAS,KAAK,OAAO,CAAC;QAC5B,MAAM,WAAW,UAAU,IAAI,KAAK,KAAK,CAAC,KAAK,GAAG,CAAC,GAAG,SAAS,MAAM,SAAS,OAAO;QAErF,gBAAgB;QAChB,MAAM,WAAW,KAAK,MAAM;QAC5B,MAAM,cAAc,KAAK,KAAK,CAAC,GAAG;QAElC,OAAO,gJAAY,CAAC,IAAI,CAAC;YACrB,QAAQ,IAAI,MAAM;YAClB;YACA;YACA;YACA;YACA;YACA;YACA,aAAa;YACb,eAAe;YACf;QACJ;IACJ,EAAE,OAAO,KAAU;QACf,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,IAAI,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACnE;AACJ"}}]
}